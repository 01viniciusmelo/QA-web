{% load humanize %}
{% if user_tokens %}
    <div class="table-responsive" style="padding-top: 10px">
        <table class="table table-hover table-bordered" id="usn_table_master">
            <thead>
            <tr>
                <th>نام ماژول</th>
                <th>نام کلاس</th>
                <th>نشانه</th>
                <th>حداکثر کوئری</th>
                <th>تاریخ ایجاد</th>
                <th>عملیات</th>
            </tr>
            </thead>
            <tbody id="token_table_body">
            {% for token in user_tokens %}
                <tr>
                    <td class="lato-font align-center" width="10%">{{ token.bot_module_name }}</td>
                    <td class="lato-font align-center" width="10%">{{ token.bot_class_name }}</td>
                    <td class="lato-font align-center">
                        <pre><code>{{ token.token }}</code></pre>
                    </td>
                    <td class="lato-font align-center" width="5%" style="direction:ltr;">{{ token.max_queries }}</td>
                    <td class="align-center" width="15%">{{ token.created_on | naturaltime }}</td>
                    <td class="align-center" width="25%">
                        <div class="form-group col-md-5">
                            <div class="">
                                <form action="{% url 'openfire-admin:user-token' %}" method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="_method" value="delete">
                                    <input type="hidden" name="token_pk" value="{{ token.pk }}">
                                    <button type="submit" class="btn btn-danger">حذف توکن
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </form>
                            </div>
                        </div>

                        <div class="col-md-5">
                            <input type="hidden" name="_method" value="delete">
                            <input type="hidden" name="token_pk" value="{{ token.pk }}">
                            <a data-toggle="modal" href="#modal-{{ forloop.counter }}-{{ token.token }}" class="btn btn-info">مشاهده راهنما
                                <i class="fa fa-info-circle"></i>
                            </a>
                        </div>

                        <div class="modal fade" id="modal-{{ forloop.counter }}-{{ token.token }}">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                            &times;
                                        </button>
                                        <h4 class="modal-title">نحوه استفاده</h4>
                                    </div>
                                    <div class="modal-body">
                                        Your unique api token help
                                        <pre><code>{{ token.token }}</code></pre>

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">بستن
                                        </button>
                                    </div>
                                </div><!-- /.modal-content -->
                            </div><!-- /.modal-dialog -->
                        </div><!-- /.modal -->


                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="jumbotron">
        <div class="container alert alert-info">
            <p> شما هنوز هیچ رباتی ایجاد نکرده اید.</p>
        </div>
    </div>
{% endif %}
<form enctype="multipart/form-data" action="{% url 'openfire-admin:user-token' %}" method="post">
    {% csrf_token %}
    <input type="hidden" name="user" value="{{ user.pk }}">
    <div class="form-inline">
        <div class="form-group">
            <label class="sr-only" for="bot_module_name">نام ماژول روبات</label>
            <input type="text" style="direction: ltr;" data-toggle="tooltip" data-title="نام ماژول روبات"
                   class="form-control lato-font" name="bot_module_name" id="bot_module_name" value="base_bot"
                   placeholder="نام ماژول روبات">
        </div>
        <div class="form-group">
            <label class="sr-only" for="bot_class_name">نام کلاس روبات</label>
            <input type="text" style="direction: ltr;" data-toggle="tooltip" data-title="نام کلاس روبات"
                   class="form-control lato-font" name="bot_class_name" id="bot_class_name" value="SampleBot"
                   placeholder="نام کلاس روبات">
        </div>
        <div class="form-group">
            <label class="sr-only" for="bot_file">فایل روبات</label>
            <input type="file" class="form-control" name="bot_file" id="bot_file"
                   placeholder="فایل روبات">
        </div>
        <button type="submit" class="btn btn-success">ایجاد روبات جدید</button>
    </div>
</form>
